export const dataDummy = [
    {
        id: 1,
        name: "Dompet",
        sku: "1234",
        desc: "<p>dompet bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 2,
        name: "Tas",
        sku: "1234",
        desc: "<p>tas bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 3,
        name: "Smartphone",
        sku: "1234",
        desc: "<p>smartphone bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 4,
        name: "Baju",
        sku: "1234",
        desc: "<p>baju bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 5,
        name: "Celana",
        sku: "1234",
        desc: "<p>celana bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 6,
        name: "Topi",
        sku: "1234",
        desc: "<p>topi bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 7,
        name: "Kerudung",
        sku: "1234",
        desc: "<p>kerudung bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 8,
        name: "Sarung Tangan",
        sku: "1234",
        desc: "<p>sarung tangan bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 9,
        name: "Celana Panjang",
        sku: "1234",
        desc: "<p>celana panjang bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 10,
        name: "sabuk",
        sku: "1234",
        desc: "<p>sabuk bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 11,
        name: "motor",
        sku: "1234",
        desc: "<p>motor bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 12,
        name: "mobil",
        sku: "1234",
        desc: "<p>mobil bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 13,
        name: "Galon",
        sku: "1234",
        desc: "<p>galon bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 14,
        name: "lampu merah",
        sku: "1234",
        desc: "<p>lampu merah bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 15,
        name: "Korden",
        sku: "1234",
        desc: "<p>korden bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 16,
        name: "Sepatu biru",
        sku: "1234",
        desc: "<p>Sepatu biru bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 17,
        name: "Sandal jepit",
        sku: "1234",
        desc: "<p>sandal jepit bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 18,
        name: "Baju kemeja",
        sku: "1234",
        desc: "<p>baju kemeja bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 19,
        name: "Baju Koko",
        sku: "1234",
        desc: "<p>baju koko bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 20,
        name: "Peci",
        sku: "1234",
        desc: "<p>peci bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
    {
        id: 21,
        name: "Sarung",
        sku: "1234",
        desc: "<p>sarung bagus</p>",
        brand: "ABC",
        variant: [
            {
                name: "Warna Biru",
                sku: "12345",
                harga_jual: 10000
            },
        ]
    },
]

class ProductServices {

    getProducts = (page, paging = 10) => {

        var dataProducts = localStorage.getItem('products');

        var dataProductsParse = JSON.parse(dataProducts);

        return {
            success: true,
            data: dataProductsParse.slice((page - 1) * 10, page * 10),
            page: page,
            paging: paging,
            lastPage: Math.ceil(dataDummy.length / 10)
        }
    }

    addProduct = (body) => {

        if(!body.name || !body.sku || !body.brand || !body.desc)
        {
            return {
                success: false,
                message: 'Add product failed!'
            }
        }

        var dataProducts = localStorage.getItem('products');

        if(dataProducts)
        {
            var dataProductParse = JSON.parse(dataProducts);

            var newProduct = {
                id: dataProductParse.length + 1,
                name: body.name,
                sku: body.sku,
                brand: body.brand,
                desc: body.desc,
                variant: body.variant || []
            }

            var newProducts = [newProduct, ...dataProductParse];
    
            localStorage.setItem('products',JSON.stringify(newProducts));

            return {
                success: true,
                message: 'Success add product!'
            }
        } else {
            var newProduct = {
                id: dataProductParse.length + 1,
                name: body.name,
                sku: body.sku,
                brand: body.brand,
                desc: body.desc,
                variant: body.variant || []
            }

            var newProducts = [newProduct];

            var dataProductParse = JSON.parse(dataProducts);
    
            localStorage.setItem('products',JSON.stringify(newProducts));

            return {
                success: true,
                message: 'Success add product!'
            }
        }

    }

    updateProduct = async (body) => {

        var dataProducts = localStorage.getItem('products');

        var dataProductsParse = JSON.parse(dataProducts);

        var editedProducts = [];

        for (let i = 0; i < dataProductsParse.length; i++) {
            var e = dataProductsParse[i];

            if(e.id == body.id)
            {
                var newProduct = {
                    id: e.id,
                    name: body.name,
                    sku: body.sku,
                    brand: body.brand,
                    desc: body.desc,
                    variant: body.variant
                }

                editedProducts = [...editedProducts, newProduct]

            } else {
                editedProducts = [...editedProducts, e]
            }   
        }

        localStorage.setItem('products',JSON.stringify(editedProducts));

        return {
            success: true,
            message: 'Success delete product!'
        }

    }

    deleteProduct = async (id) => {

        var dataProducts = localStorage.getItem('products');

        var dataProductsParse = JSON.parse(dataProducts);

        var newDataProducts = await dataProductsParse.filter(item => {
            return item.id !== id;
        })

        localStorage.setItem('products',JSON.stringify(newDataProducts));

        return {
            success: true,
            message: 'Success delete product!'
        }

    }

}

export default ProductServices;